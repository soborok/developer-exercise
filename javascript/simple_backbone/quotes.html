<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script>
  <script src="js/backbone.paginator.js"></script>
  <script src="js/bootstrap.js"></script>
  <script src="js/backgrid.js"></script>
  <script src="js/backgrid-paginator.js"></script>
  <script src="js/quotes.js"></script>

  <link rel="stylesheet" href="css/bootstrap.css" />
  <link rel="stylesheet" href="css/bootstrap-theme.css" />
  <link rel="stylesheet" href="css/backgrid.css" />
  <link rel="stylesheet" href="css/backgrid-paginator.css" />
  <link rel="stylesheet" href="css/quote.css">
</head>

<body>
  <header id="list-title">
    <h2>Quote List</h2>
    <span class="quote filter movies" id="movies">movies
    </span>
    <span class="quote filter games" id="games">games
    </span>
  </header>
  <div id="main">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div id="grid"></div>
          <div id="paginator"></div>
        </div>
      </div>
    </div>
  </div>
  <div id="quote-list"></div>
</body>

<script>
// Pagination using Backbone.PageableCollection
// with Backgrid, Backgrid.Paginator
  var columns = [ 
      { name: "quote", editable: false, cell: "string" }, 
      { name: "context", editable: false, cell: "string" }, 
      { name: "source", editable: false, cell: "string" }, 
      { name: "theme", editable: false, cell: "string" }
    ];

  var PageableQuoteCollection = Backbone.PageableCollection.extend({
    url: "https://gist.githubusercontent.com/anonymous/8f61a8733ed7fa41c4ea/raw/1e90fd2741bb6310582e3822f59927eb535f6c73/quotes.json",
    mode: "client", 
    state: { pageSize: 15 }
  });

  var quotes = new PageableQuoteCollection();

  var grid = new Backgrid.Grid({
    columns: columns,
    collection: quotes
  });

  var paginator = new Backgrid.Extension.Paginator({
    collection: quotes
  });

  $("#grid").append(grid.render().$el);
  $("#paginator").append(paginator.render().$el);

  quotes.fetch();

// // Disaply quote list from json source using Backbone
// // with filtering by theme (Pagination is not implemented)
//   var quotes = new QuoteCollection();
//   var quoteListView = new QuoteListView({ collection: quotes });
//   quotes.fetch({ reset: true });
//   $("#quote-list").append(quoteListView.el);

//   $("#list-title span").on('click', function() {
//     var theme = $(this).attr('id');

//     var quotesOfTheme = new Backbone.Collection(quotes.filter(function(quote) {
//       return quote.get("theme") == theme;
//     }));

//     replaceQuoteList(quotesOfTheme);
//   });

//   $("#list-title h2").on('click', function() {
//     replaceQuoteList(quotes);
//   });


//   function replaceQuoteList(newQuotes) {
//     quoteListView = new QuoteListView({ collection: newQuotes });  
//     quoteListView.addAll();
//     $("#quote-list ul").replaceWith(quoteListView.el);
//   }
  </script>
</html>
